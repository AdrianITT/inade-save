{% extends 'accounts/base_dashboard.html' %}
{% load static %}
{% block title %}Términos y Avisos de Privacidad{% endblock %}
{% block header %}Términos y Avisos de Privacidad{% endblock %}
{% block content %}


<div class="container-xxl">

     
     <ul class="nav nav-tabs"> <!-- CONTENEDOR DE LINKS DE PESTAÑAS -->
          <li class="nav-item">
               <a class="nav-link active" href="#organizacion" data-bs-toggle="tab">Organización</a>
          </li>
          <li class="nav-item">
               <a class="nav-link " href="#cotizaciones" data-bs-toggle="tab">Cotizaciones</a>
          </li>
          <li class="nav-item">
               <a class="nav-link" href="#ordenes" data-bs-toggle="tab">Órdenes de Trabajo</a>
          </li>
          <li class="nav-item">
               <a class="nav-link" href="#sistema" data-bs-toggle="tab">Configuracion del sistema</a>
          </li>
     </ul>

     <div class="tab-content"> <!-- CONTENEDOR DE PESTAÑAS -->

          <div class="tab-pane fade show active" id="organizacion"> <!-- CONTENEDOR DE ORGANIZCION -->

               <div class="row mt-5 mb-5"> <!-- TITULO -->
                    
                    <div class="col">
                         <h2 class="">Organizacion</h2>
                    </div>
                    <div class="col  text-end">
                         <a href="{% url 'cargar_csd' %}" class="btn btn-primary">Carga Certificado de Sellos Dijitales</a>
                    </div>
                    
               </div>
               
               <div id="loading" style="display: none;" class="text-center"><!-- Spinner -->
                    <div class="spinner-border" role="status">
                         <span class="visually-hidden">Cargando...</span>
                    </div>
                    <p>Por favor, espera...</p>
               </div>

               <form method="post" enctype="multipart/form-data">  <!-- Añade enctype si usas archivos -->
                    {% csrf_token %}
                    

                    <div class="row">
                         <div class="col">
                              <!-- Campo para Nombre -->
                              <div class="form-group">
                                   <a href="#" data-bs-toggle="tooltip" data-bs-title="Default tooltip">inline links</a>
                                   {{ form.nombre.label_tag }}
                                   {{ form.nombre }}
                                   <small class="form-text text-muted">
                                        Ingrese el nombre de la organización. 
                                   </small>
                                   <div class="alert alert-warning " id="alert" role="alert">
                                        <p>El nombre del emisor ahora se debe registrar en mayusculas y sin el régimen societario.</p>
                                        <p>Debe registrarse tal y como se encuentra en la Cédula de Identificación Fiscal y Constancia de Situación Fiscal, respetando números, espacios y signos de puntuación.</p>
                                        <p>
                                             Ejemplo: <br>
                                             <code>
                                             Nombre o Razón Social: Empresa Importante S.A. DE C.V <br>
                                             Debe colocarse: EMPRESA IMPORTANTE <br>
                                             Estos datos los puedes obtener en la CIF <br>
                                             Nota: Esto aplica tanto para personas físicas como morales</code>
                                        </p>
                                        Clave del Registro Federal de Contribuyentes del Emisor (recuerda que debes tener los CSD del RFC cargados) 
                                   </div>
                                      
                              </div>

                              <!-- Campo para Slogan -->
                              <div class="form-group">
                                   {{ form.slogan.label_tag }}
                                   {{ form.slogan }}
                                   <small class="form-text text-muted">Ingrese el slogan de la organización.</small>
                              </div>
                               <!-- Campo para Régimen Fiscal -->
                              <div class="form-group">
                                   {{ form.regimen_fiscal.label_tag }}
                                   {{ form.regimen_fiscal }}
                                   <small class="form-text text-muted">Seleccione el régimen fiscal de la organización.</small>
                              </div>

                              <!-- Campo para Teléfono -->
                              <div class="form-group">
                                   {{ form.telefono.label_tag }}
                                   {{ form.telefono }}
                                   <small class="form-text text-muted">Ingrese el teléfono de contacto de la organización.</small>
                              </div>

                              <!-- Campo para Página Web -->
                              <div class="form-group">
                                   {{ form.pagina_web.label_tag }}
                                   {{ form.pagina_web }}
                                   <small class="form-text text-muted">Ingrese la URL de la página web de la organización.</small>
                              </div>

                              <!-- Campo para Logo -->
                              <div class="form-group">
                                   {{ form.logo.label_tag }}
                                   {{ form.logo }}
                                   <small class="form-text text-muted">Suba el logo de la organización en formato de imagen.</small>
                              </div>
                         </div>
                         <div class="col">
                              <!-- Campos de Dirección -->
                              <div class="form-group">
                                   {{ form.calle.label_tag }}
                                   {{ form.calle }}
                                   <small class="form-text text-muted">Ingrese la calle de la dirección de la organización.</small>
                              </div>

                              <div class="form-group">
                                   {{ form.numero.label_tag }}
                                   {{ form.numero }}
                                   <small class="form-text text-muted">Ingrese el número de la dirección de la organización.</small>
                              </div>

                              <div class="form-group">
                                   {{ form.colonia.label_tag }}
                                   {{ form.colonia }}
                                   <small class="form-text text-muted">Ingrese la colonia de la dirección de la organización.</small>
                              </div>

                              <div class="form-group">
                                   {{ form.ciudad.label_tag }}
                                   {{ form.ciudad }}
                                   <small class="form-text text-muted">Ingrese la ciudad de la dirección de la organización.</small>
                              </div>

                              <div class="form-group">
                                   {{ form.codigo.label_tag }}
                                   {{ form.codigo }}
                                   <small class="form-text text-muted">Ingrese el código postal de la dirección de la organización.</small>
                              </div>

                              <div class="form-group">
                                   {{ form.estado.label_tag }}
                                   {{ form.estado }}
                                   <small class="form-text text-muted">Ingrese el estado de la dirección de la organización.</small>
                              </div>
                         </div>
                    </div>

               

                    <div class="text-end m-5">
                        <button type="submit" name="guardar_organizacion" class="btn btn-success">Guardar configuración</button>
                    </div>
               </form>
          </div>

          <div class="tab-pane fade show" id="cotizaciones"> <!-- CONTENEDOR DE FORMATO DE COTIZACIONES -->

               <h2 class="mt-5 mb-5">Cotizaciones</h2>

               <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="row">

                         <div class="col-md-5">
                              {% if formato_cotizacion.imagen_marca_agua %}

                                   <h4>Marca de agua:</h4>

                                   <div style="border: 1px solid #ddd; padding: 10px; margin-bottom: 15px;">
                                        <img src="{{ formato_cotizacion.imagen_marca_agua.url }}" alt="Marca de agua" style="max-width: 100%; height: auto;">
                                   </div>
                              {% else %}
                                   <code>No se ha subido ninguna imagen de marca de agua.</code>
                              {% endif %}

                              <div class="mt-4">
                                   <div class="card">
                                        <div class="card-header">
                                             <h5 class="card-title mb-0">Guía rápida de etiquetas HTML</h5>
                                        </div>
                                        <div class="card-body">
                                             <h6 class="card-subtitle mb-2 text-muted">Formato básico en HTML</h6>
                                             <p class="card-text">
                                                  En HTML, puedes aplicar varios tipos de formato a tu texto usando etiquetas especiales. Aquí te
                                                  mostramos las más comunes:
                                             </p>

                                             <ul class="list-group list-group-flush">
                                                  <li class="list-group-item">
                                                       <strong>&lt;strong&gt;</strong>: Se utiliza para poner el texto en <strong>negritas</strong>.
                                                  </li>
                                                  <li class="list-group-item">
                                                       <em>&lt;em&gt;</em>: Se usa para poner el texto en <em>cursiva</em>.
                                                  </li>
                                                  <li class="list-group-item">
                                                       <code>&lt;code&gt;</code>: Para marcar el <code>código</code> dentro del texto.
                                                  </li>
                                                  <li class="list-group-item">
                                                        &lt;p&gt;: Para crear un párrafo separado dentro de tu documento.
                                                  </li>
                                                  <li class="list-group-item">&lt;ul&gt; y &lt;li&gt;: Para crear 
                                                       <ul>
                                                            <li>listas con viñetas</li>
                                                       </ul>
                                                  </li>
                                             </ul>
                              
                                             <p class="card-text mt-3">
                                                  Aquí tienes un ejemplo práctico:
                                             </p>
                              
                                             <div class="bg-light rounded">
                                                  <pre>
<code>
     &lt;p&gt;Este es un texto normal con &lt;strong&gt;negritas&lt;/strong&gt;, &lt;em&gt;cursivas&lt;/em&gt; y &lt;code&gt;código&lt;/code&gt; en línea.&lt;/p&gt;<br>
     &lt;ul&gt;<br>
     &lt;li&gt;Primer ítem&lt;/li&gt;<br>
     &lt;li&gt;Segundo ítem&lt;/li&gt;<br>
     &lt;li&gt;Tercer ítem&lt;/li&gt;<br>
     &lt;/ul&gt;<br>                  
</code></pre>
                                                 
                                             </div>
                              
                                             <p class="card-text mt-3">
                                                  Este código se renderiza de la siguiente forma:
                                             </p>
                              
                                             <p>Este es un texto normal con <strong>negritas</strong>, <em>cursivas</em> y <code>código</code> en
                                                  línea.</p>
                                             <ul>
                                                  <li>Primer ítem</li>
                                                  <li>Segundo ítem</li>
                                                  <li>Tercer ítem</li>
                                             </ul>
                                        </div>
                                   </div>
                              </div>

                              
                         </div>

                         <div class="col">
                              {{ formato_cotizacion_form.as_p }}
                         </div>

                    </div>

                    <div class="text-end m-5">
                         <button type="submit" name="guardar_cotizacion" class="btn btn-success">Guardar Cotización</button>
                         <!-- Ejemplo de botón -->
                         <a href="{% url 'cotizacion_prueba' %}" class="btn btn-primary">Generar Cotización de Prueba Formato Acutal</a>
                    </div>

               </form>
          </div>

          <div class="tab-pane fade" id="ordenes"> <!-- CONTENEDOR DE PESTAÑAS -->

               <h2 class="mt-5 mb-5">Órdenes de Trabajo</h2>

               <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="row">

                         <div class="col-md-4">
                              {% if formato_orden.imagen_marca_agua %}

                                   <h4>Marca de agua:</h4>

                                   <div style="border: 1px solid #ddd; padding: 10px; margin-bottom: 15px;">
                                        <img src="{{ formato_orden.imagen_marca_agua.url }}" alt="Marca de agua" style="max-width: 100%; height: auto;">
                                   </div>

                              {% else %}
                                   <code>No se ha subido ninguna imagen de marca de agua.</code>
                              {% endif %}
                         </div>

                         <div class="col">
                              {{ formato_orden_form.as_p }}
                         </div>

                    </div>

                    <div class="text-end m-5">
                         <button type="submit" name="guardar_orden" class="btn btn-success">Guardar Orden</button>
                    </div>
                    
               </form>
          </div>

          <div class="tab-pane fade" id="sistema"> <!-- CONTENEDOR DE PESTAÑAS -->
               
               <h2 class="mt-5 mb-5">Configuración del Sistema</h2>

               <form method="post" novalidate>

                    {% csrf_token %}

                    <div class="mb-3">
                         <label for="{{ form.moneda_predeterminada.id_for_label }}" class="form-label">
                             {{ forms.moneda_predeterminada.label }}
                         </label>
                         {{ forms.moneda_predeterminada }}
                         {% if forms.moneda_predeterminada.errors %}
                             <div class="text-danger">{{ forms.moneda_predeterminada.errors }}</div>
                         {% endif %}
                     </div>
                 
                     <div class="mb-3">
                         <label for="{{ form.tasa_iva_default.id_for_label }}" class="form-label">
                             {{ forms.tasa_iva_default.label }}
                         </label>
                         {{ forms.tasa_iva_default  }}
                         {% if forms.tasa_iva_default.errors %}
                             <div class="text-danger">{{ forms.tasa_iva_default.errors }}</div>
                         {% endif %}
                     </div>
                 
                     <div class="mb-3">
                         <label for="{{ form.formato_numero_cotizacion.id_for_label }}" class="form-label">
                             {{ forms.formato_numero_cotizacion.label }}
                         </label>
                         {{ forms.formato_numero_cotizacion }}
                         {% if forms.formato_numero_cotizacion.errors %}
                             <div class="text-danger">{{ forms.formato_numero_cotizacion.errors }}</div>
                         {% endif %}
                     </div>
                 
                     <div class="mb-3">
                         <label for="{{ form.tipo_de_cambio_dolar.id_for_label }}" class="form-label">
                             {{ forms.tipo_de_cambio_dolar.label }}
                         </label>
                         {{ forms.tipo_de_cambio_dolar }}
                         {% if forms.tipo_de_cambio_dolar.errors %}
                             <div class="text-danger">{{ forms.tipo_de_cambio_dolar.errors }}</div>
                         {% endif %}
                     </div>
                    <div class="text-end m-5">
                         <button type="submit" name="guardar_sistema" class="btn btn-success">Guardar configuracion de sistema</button>
                    </div>
               </form>
          </div>

     </div>
</div>

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
     document.getElementById("id_nombre").addEventListener("input", function() {
          this.value = this.value.toUpperCase();
      });
     const swalWithBootstrapButtons = Swal.mixin({
          customClass: {
               confirmButton: "btn btn-success",
               cancelButton: "btn btn-danger"
          },
     });
     swalWithBootstrapButtons.fire({
          title: "Estas seguro?",
          text: "No podras revertir los cambios!",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: "Si, seguro!",
          cancelButtonText: "No, cancelar!",

     }).then((result) => {
          if (result.isConfirmed) {
          } else if (result.dismiss === Swal.DismissReason.cancel) {
               // Redirigir a la página de inicio cuando se cancela
               window.location.href = "{% url 'home' %}"; // Cambia esta URL por la de tu página de inicio
          }
     });
</script>
{% endblock %}
{% endblock %}